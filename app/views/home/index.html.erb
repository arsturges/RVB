    <table class="datatable">
      <caption>Current Activities</caption>
  <tr>
      <th><%=order(@search, :by => :short_name, :as => "Rulemaking") %></th>
      <th>Project Manager</th>
      <th><%=order(@search, :by => :rulemaking_phase, :as=>"Actual Phase <br> as of "+Revision.maximum(:revision_date).to_s) %></th>
      <th><%=order(@search, :by => :activity, :as=>"Actual Activity <br> as of "+Revision.maximum(:revision_date).to_s) %></th>
      <th><%=order(@search, :by => 'milestone_phase', :as=>"Scheduled Phase") %></th>
      <th><%=order(@search, :by => 'milestone_activity', :as=>"Scheduled Activity") %></th>
      <th>Legislative Deadline</th>
      <th><%=order(@search, :by => :milestone, :as => "Projected Finish") %></th>
      <th>Schedule Lag</th>

  </tr>
  <% @current.each do |milestone| %>
  <tr class="<%= cycle('odd', 'even') %>">
    <td><%= link_to(milestone.rulemaking.short_name, rulemaking_path(milestone.rulemaking_id)) %></td>
    <td><%= h milestone.rulemaking.doe_project_manager.try(:project_manager) %> </td>
    <td><%= h milestone.rulemaking.phase.try(:phase) %> </td>
    <td><%= h milestone.rulemaking.activity.try(:activity)  %> </td>
    <td><%= h milestone.phase.phase %> </td>
    <td><%= h milestone.activity.activity %> </td>
    <td><%= h milestone.rulemaking.try(:legislative_deadline) %> </td>
    <td><%= h milestone.milestone %></td>
    <% planned_finish = @planned_finishes.detect{|i|i.rulemaking_id == milestone.rulemaking_id and i.phase_id == milestone.phase_id and i.activity_id == milestone.activity_id and i.date_category_id == 2}  %>
     
    <td>
      <% if planned_finish && milestone.rulemaking.legislative_deadline %>
          <%= schedule_lag(milestone.milestone, planned_finish.milestone, milestone.rulemaking.legislative_deadline) %>
      <% end %>
    </td>
  </tr>
  <%  end %>
    </table>